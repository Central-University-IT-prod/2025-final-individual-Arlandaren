# aka Reklamniy dvizhok aldara

Движок рекламной платформы с функционалом управления кампаниями, рекламодателями, объявлениями и клиентами с поддержкой статистики и API сервисов.

## Содержание

- [Требования](#требования)
- [Установка](#установка)
- [Запуск приложения](#запуск-приложения)
- [Тестирование](#тестирование)
- [Описание API](#описание-api)
- [Архитектура](#архитектура)
- [Дополнительная информация](#дополнительная-информация)
- [Стресс-тест](#стресс-тест)
- [Демонстрация](#демонстрация)
- [Схема базы данных](#схема-базы-данных)
- [Схема архитектуры](#схема-архитектуры)

──────────────────────────────
## Требования

- Go 1.18+
- Docker

──────────────────────────────
## Установка

1. Клонируйте репозиторий:
   ```
   git clone https://aldar@infoowner и тд
   cd repository
   ```

2. Настройте переменные окружения. Для этого можно создать файл `.env` или установить переменные в системе. Пример .env:
   ```
   PG_STRING=
    POSTGRES_PASSWORD=
    POSTGRES_USER=
    POSTGRES_DB=
    POSTGRES_HOST =
    HTTP_ADDRESS=
    ENVIRONMENT=
    REDIS_ADDRESS=
    REDIS_PASSWORD=
    METRICS_HOST=
    TOGETHER_API = 
    TOGETHER_URL = 
   ```

3. Настройте переменные окружения (например, URL базы данных, API-ключи и т.д.). Для этого можно создать файл `.env` или установить переменные в системе. Пример .env:
   ```
   DB_HOST=localhost
   DB_PORT=5432
   DB_USER=youruser
   DB_PASSWORD=yourpassword
   DB_NAME=yourdbname
   API_KEY=yourapikey
   ```
──────────────────────────────
## Запуск приложения

Для запуска выполните команду:
```
docker-compose up -d --build
```

Приложение будет запущено и доступно по указанному адресу (Сервер: http://localhost:8080, NGINX: http://localhost:8081).

──────────────────────────────
## Тестирование

Доступно множество вариантов для тестирования приложения:
1. Ручное тестирование через Postman. Воспользуйтесь файлом [постман коллекции](./collection.json).
2. E2e тестирование через tavern/pytest [тесты](../tests) P.S за качество не ручаюсь ☺️.
3. Unit тестирование. Тест покрыт модульными unit тестами для локального тестирования `go test ./...` Покрыто 95% доступного к юнит тестированию кода.

──────────────────────────────
## Описание API

Подробное описание работы основных точек входа API находится в файле [api.md](./api.md).

──────────────────────────────
## Архитектура

Проект построен с опорой на принципы чистой архитектуры, паттерны разделения ответственности и подход DDD. Хотя опытные разработчики могут спорить о абсолютной строгости реализованных паттернов, стоит отметить, что учитывая специфику проекта основная цель – следовать лучшим практикам, но с приоритетом скорости разработки и оперативного добавления нового функционала, а не безупречной симфонии архитектурных идеалов.

### Структура проекта

[Посмотреть структуру](struct.md)

-**Domains**
  Каталог [domains](../internal/domains) содержит бизнес-логику, разделённую на отдельные доменные зоны ответственности. Здесь находятся модели и правила, отражающие специфические области приложения (например, управление кампаниями, рекламодателями, клиентами и т.д.).

-**Infrastructure**
  Каталог [infrastructure](../internal/infrastructure) включает все компоненты, обеспечивающие работу низкоуровневых систем. Здесь реализованы доступ к базе данных, взаимодействие с внешними сервисами, работа с сетью и другие технические аспекты, поддерживающие доменную логику.

-**Application**
  Каталог [application](../internal/application) представляет собой ядро системы, где происходит сборка и управление компонентами. Этот слой объединяет доменную логику и инфраструктурные решения, служа главным контроллером приложения.

Такой подход позволяет изолировать бизнес-логику от технических деталей, обеспечивая гибкость развития проекта и упрощая сопровождение кода, одновременно сохраняя баланс между архитектурной строгостью и скоростью разработки.

Таким образом, каждый сервис имеет свою четкую область ответственности, что позволяет обеспечить масштабируемость, удобство мониторинга, логирования и управления приложением.

──────────────────────────────
## Дополнительная информация

- Реализовано централизованное управление логами посредством loki/promtail/grafana.
- Графана доступна на [localhost:3000](http://localhost:3000/) для визуализации данных, имеются предустановленные дешборды.
- Эндпоинт `/metrics` предназначен для сбора внутренних метрик сервера.
- Хелс чек `/ping`.
- Доступна загрузка изоображений по ендпоинту `/content/file/upload`
- Код местами покрыт комментариями для удобства стороннего обозревателя.
- В коде используется OpenSource обертка для работы с Pgx - PgxWrappy. Всех гошников прошу обратить на нее внимание и поставить звездочку на гитхабе ☺️ [Помочь в развитии проекта](https://github.com/Arlandaren/pgxWrappy)

Для получения более детальной информации обращайтесь к документации в репозитории.

[клик](./services.md)
------------------------------------------------------------
## Технология искусственного интеллекта

Ни для кого уже не секрет, особенно для нас, разработчиков, что искусственный интеллект, а в частности нейронные сети, являются мейнстримом современной технологической индустрии. Предоставляя мощные возможности как для разработки, так и для автоматизации рутинных процессов, ИИ становится неотъемлемой частью нашей повседневной жизни.

В моем проекте также внедрена генеративная LLM-нейросеть, которая позволяет без значительного участия человека модерировать сотни тысяч рекламных текстов и объявлений, а также помогать рекламодателям создавать эффективные и продающие рекламные кампании. Приветствуем Aldar's AI Helper – доступного через следующие эндпоинты:

-**/content/moderate**– данный эндпоинт возвращает значение `true`, если текст не прошёл цензуру, и `false`, если всё в порядке.
-**/content/propose**– этот эндпоинт генерирует предложения для рекламного текста на основе имени рекламодателя и названия рекламной кампании.

──────────────────────────────
## Стресс-тест

В рамках стресс-тестирования нашей рекламной платформы была проведена оценка её боевых возможностей при высокой нагрузке.

### Цели тестирования

- Определить максимально возможное количество запросов, которое платформа способна обрабатывать стабильно.
- Оценить устойчивость системы при нагрузке, соответствующей современным требованиям IT-инфраструктуры.

### Результаты теста

-**Производительность:**Платформа успешно выдерживала до**2000 rps (requests per second)**.
-**Стабильность:**При таком уровне нагрузки система демонстрировала стабильную работу, что критически важно для обеспечения надежности в боевых условиях.

### Методология

- Тестирование проводилось с использованием инструмента [Apache JMeter](https://jmeter.apache.org/), который позволяет моделировать высокую нагрузку и тщательно анализировать показатели производительности.

Эти результаты подтверждают, что наша рекламная платформа соответствует всем требованиям современности, учитывая высоконагруженную среду. Способна эффективно масштабироваться и работать стабильно даже при значительном увеличении числа запросов.
![стрессачок](stresstest.jpg)

──────────────────────────────
## Демонстрация

Краткая демонстрация работы приложения доступна [здесь](demo.md)

──────────────────────────────
## Схема базы данных

Схема базы данных находится в файле [ad_bd.png](./ad_bd.png). Ознакомьтесь с файлом, чтобы понять структуру таблиц и взаимосвязи.

![Схема данных СУБД](./ad_bd.png)

──────────────────────────────
## Схема архитектуры
![Схема архитектуры](arch.png)

---
Пояснения:
- Ссылка на файл схемы СУБД оформлена как относительная ссылка: [ad_bd.png](./ad_bd.png).
- Описание основных точек входа API доступно в файле [api.md](./api.md).
- Скриншот стресс теста [клик](stresstest.jpg)